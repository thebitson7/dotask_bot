# fsm/states.py
from __future__ import annotations

from aiogram.fsm.state import StatesGroup, State

__all__ = [
    "AddTask",
    "EditTask",
    "SearchTask",
    "ViewTask",
]


class AddTask(StatesGroup):
    """
    ๐ง ุฌุฑุงู ุงูุฒูุฏู ุชุณฺฉ ุฌุฏุฏ

    ูุฑุงุญู ูุนุงู ูุนู:
      1) waiting_for_content     โ ุฏุฑุงูุช ูุชู ุชุณฺฉ
      2) waiting_for_due_date    โ ุงูุชุฎุงุจ ุชุงุฑุฎ (ฺฉูุฏูุง ุขูุงุฏู)
      3) waiting_for_custom_date โ ูุฑูุฏ ุชุงุฑุฎ ุฏุณุช (ุงุฎุชุงุฑ)
      4) waiting_for_priority    โ ุงูุชุฎุงุจ ุงูููุช (HIGH/MEDIUM/LOW)

    ูฺฉุงุช:
    - ุงู ูุงูโูุง ุฏุฑ ููุฏูุฑูุง ูุนู ุงุณุชูุงุฏู ุดุฏูโุงูุฏุ ุชุบุฑุดุงู ุณุงุฒฺฏุงุฑ ุฑุง ูโุดฺฉูุฏ.
    - ุจุฑุง ุขูุฏูุ ูโุชูุงู ูุฑุงุญู ยซูพุดโููุงุดยป ุง ยซุงุฏุขูุฑยป ุฑุง ุงุถุงูู ฺฉุฑุฏ.
    """

    # โ ูููโูุง ุฏุฑ ฺฉุฏูุง ูุนู ุงุณุชูุงุฏู ูโุดููุฏ โ ุชุบุฑ ูุฏูุฏ.
    waiting_for_content = State()
    waiting_for_due_date = State()
    waiting_for_custom_date = State()
    waiting_for_priority = State()

    # ูพุดููุงุฏู ุชูุณุนูโ ุขูุฏู (ูุนูุงู ุงุณุชูุงุฏู ููโุดูุฏ):
    # waiting_for_review = State()       # ูพุดโููุงุด ูุจู ุงุฒ ุฐุฎุฑู
    # waiting_for_reminder = State()     # ุชูุธู ุงุนูุงู/ุงุฏุขูุฑ
    # waiting_for_attachment = State()   # ูพูุณุช ูุงู/ุนฺฉุณ


class EditTask(StatesGroup):
    """
    โ๏ธ ุฌุฑุงู ูุฑุงุด ูุชู ุชุณฺฉ (ูุณุฎูโ ุณุงุฏู)
    - ููุท ฺฉ ูุฑุญูู: ุฏุฑุงูุช ูุชู ุฌุฏุฏ ู ุซุจุช ุชุบุฑ.
    - ุณุงุฒฺฏุงุฑ ุจุง ููุฏูุฑูุง ูุนู (list_tasks.py).
    """
    waiting_for_new_content = State()


class SearchTask(StatesGroup):
    """
    ๐ ุฌุฑุงู ุฌุณุชุฌู ุชุณฺฉโูุง
    - UX ุจูุชุฑ: ฺฉุงุฑุจุฑ ุฏฺฉูู ยซุฌุณุชุฌูยป ุฑุง ูโุฒูุฏ โ ูุงุฑุฏ ุงู ุฌุฑุงู ูโุดูุฏ.
    - ูพุณ ุงุฒ ุงุฑุณุงู ุนุจุงุฑุชุ ูุชุงุฌ ุจู ูุงูุจ ยซูุงุจ ูุณุชยป ููุงุด ุฏุงุฏู ูโุดูุฏ
      ุจุง ุฏฺฉููู ยซโ ูพุงฺฉโฺฉุฑุฏู ููุชุฑยป ู ุงูฺฉุงู ุจุฑฺฏุดุช.

    ุญุงูุชโูุง:
    - waiting_for_query: ููุชุธุฑ ุนุจุงุฑุช ุฌุณุชุฌู ุงุฒ ฺฉุงุฑุจุฑ
    - in_results: ุฏุฑ ุตูุญูู ูุชุงุฌ (ุจุง ูุงูุจุฑ/ุตูุญูโุจูุฏ ููุงููุฏ ูุณุช)
    """
    waiting_for_query = State()
    in_results = State()


class ViewTask(StatesGroup):
    """
    ๐ ููุง ฺฉุงุฑุช ุฌุฒุฆุงุช ฺฉ ุชุณฺฉ
    - ฺฉุงุฑุช ุชูุฒ ุจุง ุนููุงูุ ููุนุฏุ ุงูููุชุ ูุถุนุช ู ุงฺฉุดูโูุง (โ/โ๏ธ/๐/๐/๐)
    - ุฏุฑ FSM ููุท ุจุฑุง ุญูุธ ยซฺฉุงูุชฺฉุณุชู ุจุฑฺฏุดุชยป ูฺฏู ุฏุงุดุชู ูโุดูุฏ
      (ูุซูุงู ุจุฑฺฏุฑุฏุงูุฏู ุจู ููุงู ุตูุญู/ููุชุฑ ูุจู ุฏุฑ ูุณุช).

    ูุฑุงุฑุฏุงุฏ ุฏุงุฏูโูุง state (ุจุง state.update_data):
      - task_id: int               โ ุดูุงุณู ุชุณฺฉู ุฏุฑ ุญุงู ููุงุด
      - return_ctx: dict           โ ฺฉุงูุชฺฉุณุช ูุงูุจุฑ (s/p/f/d) ุจุฑุง ุจุฑฺฏุดุช
        ูุซูุง: {"s":"o","p":2,"f":"H","d":"T"}

    ุญุงูุชโูุง:
    - viewing: ุฏุฑ ุญุงู ููุงุด ฺฉุงุฑุช ุฌุฒุฆุงุช
    """
    viewing = State()
